
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../initial-setup/">
      
      
        <link rel="next" href="../order-api-changes/">
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Allocation Lifecycle Management by Service Provider - Puhuri Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../extra.css">
    
      <link rel="stylesheet" href="../../fonts.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#allocation-lifecycle-management-by-service-provider" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Puhuri Documentation" class="md-header__button md-logo" aria-label="Puhuri Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Puhuri Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Allocation Lifecycle Management by Service Provider
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Puhuri Documentation" class="md-nav__button md-logo" aria-label="Puhuri Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Puhuri Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome to the Puhuri documentation website!
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../branding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Branding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../terminology/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Terminology
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../environments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Environments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../toms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Technical and Organizational Measures of Puhuri Core and Puhuri Portal
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Documents
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            Documents
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../documents/statistics_pp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Privacy Policy of the Puhuri statistics webpage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../documents/statistics_tos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Terms of Use of the Puhuri statistics webpage
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Puhuri for Resource Allocators
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Puhuri for Resource Allocators
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resource-allocators-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Custom Portal Integration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Custom Portal Integration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resource-allocators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integration guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2_2" id="__nav_3_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_2">
            <span class="md-nav__icon md-icon"></span>
            API Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../API%20guide/common/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Common
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../API%20guide/authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authentication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../API%20guide/project/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../API%20guide/project-permissions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project permissions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../API%20guide/resource-allocation-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Resource allocation management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../API%20guide/listing-users-resources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listing associations between users and resources
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integration-with-puhuri-aai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Registering with Puhuri AAI Proxy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dedicated-puhuri-portal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dedicated Puhuri Portal
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../shared-puhuri-portal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shared Puhuri Portal
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Puhuri for Service Providers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Puhuri for Service Providers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../service-providers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integration Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" checked>
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    SDK Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            SDK Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../initial-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Initial setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Allocation Lifecycle Management by Service Provider
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Allocation Lifecycle Management by Service Provider
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-a-list-of-users" class="md-nav__link">
    <span class="md-ellipsis">
      Getting a list of users
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-a-list-of-ssh-keys" class="md-nav__link">
    <span class="md-ellipsis">
      Getting a list of SSH keys
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-a-list-of-resource-allocations" class="md-nav__link">
    <span class="md-ellipsis">
      Getting a list of resource allocations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#approvingrejecting-allocation-order-by-service-provider" class="md-nav__link">
    <span class="md-ellipsis">
      Approving/rejecting allocation order by service provider
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cancellation-of-orders-for-allocations" class="md-nav__link">
    <span class="md-ellipsis">
      Cancellation of orders for allocations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-resource-allocation-with-local-reference-setting-backend_id-field" class="md-nav__link">
    <span class="md-ellipsis">
      Updating resource allocation with local reference (setting backend_id field)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#providing-additional-access-detail-for-resource-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      Providing additional access detail for resource allocation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-a-list-of-members-in-a-project-with-active-resource-allocations" class="md-nav__link">
    <span class="md-ellipsis">
      Getting a list of members in a project with active resource allocations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reporting-usage-for-a-resource-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      Reporting usage for a resource allocation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#granting-user-access-to-resource" class="md-nav__link">
    <span class="md-ellipsis">
      Granting user access to resource
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#granting-user-access-to-corresponding-resources-in-batch-manner" class="md-nav__link">
    <span class="md-ellipsis">
      Granting user access to corresponding resources in batch manner
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-service-provider-for-an-organization" class="md-nav__link">
    <span class="md-ellipsis">
      Getting service provider for an organization
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#listing-users-of-service-providers-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Listing users of service provider's resources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#listing-ssh-key-for-users-of-service-providers-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Listing ssh key for users of service provider's resources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#listing-projects-with-service-providers-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Listing projects with service provider's resources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#listing-project-permissions-in-projects-using-service-providers-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Listing project permissions in projects using service provider's resources
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../order-api-changes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Order api changes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../idp_integration/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    IdP Integration
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            IdP Integration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../idp_integration/requirements-edugain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eduGAIN integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../idp_integration/requirements-direct/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Direct integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../idp_integration/attributes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Attributes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" >
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Use cases
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            Use cases
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../idp_integration/use-cases/national-portal-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    National Portal and LUMI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../idp_integration/use-cases/keycloak-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KeyCloak
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    User Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            User Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" >
        
          
          <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Account Management
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            Account Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guides/account_creation_removal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Account Creation and Removal
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guides/myaccessid_registration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MyAccessID account registration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guides/myaccessid_account_linking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MyAccessID account linking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guides/myaccessid-ssh-key/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adding SSH key to MyAccessID profile
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guides/interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interface Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guides/organization_and_project_management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Organization and project management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guides/project_membership_management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project membership management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guides/project_modification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Projects and allocations management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guides/usage_reports/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Usage reports
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guides/user_roles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User roles
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-a-list-of-users" class="md-nav__link">
    <span class="md-ellipsis">
      Getting a list of users
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-a-list-of-ssh-keys" class="md-nav__link">
    <span class="md-ellipsis">
      Getting a list of SSH keys
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-a-list-of-resource-allocations" class="md-nav__link">
    <span class="md-ellipsis">
      Getting a list of resource allocations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#approvingrejecting-allocation-order-by-service-provider" class="md-nav__link">
    <span class="md-ellipsis">
      Approving/rejecting allocation order by service provider
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cancellation-of-orders-for-allocations" class="md-nav__link">
    <span class="md-ellipsis">
      Cancellation of orders for allocations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-resource-allocation-with-local-reference-setting-backend_id-field" class="md-nav__link">
    <span class="md-ellipsis">
      Updating resource allocation with local reference (setting backend_id field)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#providing-additional-access-detail-for-resource-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      Providing additional access detail for resource allocation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-a-list-of-members-in-a-project-with-active-resource-allocations" class="md-nav__link">
    <span class="md-ellipsis">
      Getting a list of members in a project with active resource allocations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reporting-usage-for-a-resource-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      Reporting usage for a resource allocation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#granting-user-access-to-resource" class="md-nav__link">
    <span class="md-ellipsis">
      Granting user access to resource
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#granting-user-access-to-corresponding-resources-in-batch-manner" class="md-nav__link">
    <span class="md-ellipsis">
      Granting user access to corresponding resources in batch manner
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-service-provider-for-an-organization" class="md-nav__link">
    <span class="md-ellipsis">
      Getting service provider for an organization
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#listing-users-of-service-providers-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Listing users of service provider's resources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#listing-ssh-key-for-users-of-service-providers-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Listing ssh key for users of service provider's resources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#listing-projects-with-service-providers-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Listing projects with service provider's resources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#listing-project-permissions-in-projects-using-service-providers-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Listing project permissions in projects using service provider's resources
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="allocation-lifecycle-management-by-service-provider">Allocation Lifecycle Management by Service Provider</h1>
<p>This page describes operations to be performed by service provider.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>Please, read <a href="../initial-setup/">initial setup for Puhuri Core SDK</a> and
please reach out to <a href="mailto:support@puhuri.io">support email</a> to get credentials for Puhuri Core.</p>
<h2 id="getting-a-list-of-users">Getting a list of users</h2>
<p><code>list_users</code> method is used to fetch all users in Puhuri Core.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_users</span><span class="p">()</span>

<span class="c1"># result =&gt;[</span>
<span class="c1"># {&#39;affiliations&#39;: [],</span>
<span class="c1">#   &#39;agreement_date&#39;: None,</span>
<span class="c1">#   &#39;civil_number&#39;: None,</span>
<span class="c1">#   &#39;competence&#39;: &#39;&#39;,</span>
<span class="c1">#   &#39;customer_permissions&#39;: [],</span>
<span class="c1">#   &#39;date_joined&#39;: &#39;2021-06-23T07:59:59.511681Z&#39;,</span>
<span class="c1">#   &#39;description&#39;: &#39;&#39;,</span>
<span class="c1">#   &#39;email&#39;: &#39;arto.tuomi@csc.fi&#39;,</span>
<span class="c1">#   &#39;first_name&#39;: &#39;PUHURI&#39;,</span>
<span class="c1">#   &#39;full_name&#39;: &#39;PUHURI Test User 100&#39;,</span>
<span class="c1">#   &#39;is_active&#39;: True,</span>
<span class="c1">#   &#39;is_staff&#39;: False,</span>
<span class="c1">#   &#39;is_support&#39;: False,</span>
<span class="c1">#   &#39;job_title&#39;: &#39;&#39;,</span>
<span class="c1">#   &#39;last_name&#39;: &#39;Test User 100&#39;,</span>
<span class="c1">#   &#39;native_name&#39;: &#39;&#39;,</span>
<span class="c1">#   &#39;organization&#39;: &#39;&#39;,</span>
<span class="c1">#   &#39;phone_number&#39;: &#39;&#39;,</span>
<span class="c1">#   &#39;preferred_language&#39;: &#39;&#39;,</span>
<span class="c1">#   &#39;project_permissions&#39;: [{&#39;customer_name&#39;: &#39;IT CENTER FOR SCIENCE LTD&#39;,</span>
<span class="c1">#                            &#39;pk&#39;: 9,</span>
<span class="c1">#                            &#39;project_name&#39;: &#39;Project from CSC&#39;,</span>
<span class="c1">#                            &#39;project_uuid&#39;: &#39;c3be1c35f36448068cb57e278b788318&#39;,</span>
<span class="c1">#                            &#39;role&#39;: &#39;manager&#39;,</span>
<span class="c1">#                            &#39;url&#39;: &#39;https://puhuri-core-beta.neic.no/api/project-permissions/9/&#39;}],</span>
<span class="c1">#   &#39;registration_method&#39;: &#39;eduteams&#39;,</span>
<span class="c1">#   &#39;requested_email&#39;: None,</span>
<span class="c1">#   &#39;url&#39;: &#39;https://puhuri-core-beta.neic.no/api/users/f8347a45f2f4409ea6be2034edc5e91b/&#39;,</span>
<span class="c1">#   &#39;username&#39;: &#39;01cfb7d6b76d400d12b8c8e0e33e36c5ef4562c1@acc.researcher-access.org&#39;,</span>
<span class="c1">#   &#39;uuid&#39;: &#39;f8347a45f2f4409ea6be2034edc5e91b&#39;}]</span>
</code></pre></div></td></tr></table></div>
<h2 id="getting-a-list-of-ssh-keys">Getting a list of SSH keys</h2>
<p><code>list_ssh_keys</code> method is used to fetch all SSH keys in Puhuri Core.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_ssh_keys</span><span class="p">()</span>

<span class="c1"># result =&gt;</span>
<span class="p">[{</span><span class="s1">&#39;fingerprint&#39;</span><span class="p">:</span> <span class="s1">&#39;...&#39;</span><span class="p">,</span>
  <span class="s1">&#39;is_shared&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
  <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;new key&#39;</span><span class="p">,</span>
  <span class="s1">&#39;public_key&#39;</span><span class="p">:</span> <span class="s1">&#39;... &#39;</span>
                <span class="s1">&#39;...&#39;</span>
                <span class="s1">&#39;...&#39;</span><span class="p">,</span>
  <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;ssh-ed25519&#39;</span><span class="p">,</span>
  <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;...&#39;</span><span class="p">,</span>
  <span class="s1">&#39;user_uuid&#39;</span><span class="p">:</span> <span class="s1">&#39;31165878c7a04a4197f282924c1a2418&#39;</span><span class="p">,</span>
  <span class="s1">&#39;uuid&#39;</span><span class="p">:</span> <span class="s1">&#39;8ae5c9bdbafd44c78250bc98c9783fad&#39;</span><span class="p">},</span>
</code></pre></div></td></tr></table></div>
<h2 id="getting-a-list-of-resource-allocations">Getting a list of resource allocations</h2>
<p><code>list_marketplace_resources</code> method is used to fetch resources related to offerings, which belong to user's service provider.</p>
<p>Possible filter options for allocations (each one is optional):</p>
<ul>
<li><code>provider_uuid</code> - UUID of a service provider organization;</li>
<li><code>state</code> - current state of a resource allocation; valid values: <code>Creating</code>, <code>OK</code>, <code>Erred</code>, <code>Updating</code>, <code>Terminating</code>, <code>Terminated</code>;</li>
<li><code>offering_uuid</code> - UUID of a related resource;</li>
<li><code>fields</code> - list of fields to return.</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_marketplace_resources</span><span class="p">(</span>
    <span class="n">provider_uuid</span><span class="o">=</span><span class="s1">&#39;&lt;provider-uuid&gt;&#39;</span><span class="p">,</span>
    <span class="n">state</span><span class="o">=</span><span class="s1">&#39;Creating&#39;</span><span class="p">,</span>
    <span class="n">offering_uuid</span><span class="o">=</span><span class="s1">&#39;&lt;offering-uuid&gt;&#39;</span><span class="p">,</span>
    <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;offering&#39;</span><span class="p">,</span> <span class="s1">&#39;state&#39;</span><span class="p">,</span> <span class="s1">&#39;limits&#39;</span><span class="p">,</span> <span class="s1">&#39;plan&#39;</span><span class="p">,</span> <span class="s1">&#39;project&#39;</span><span class="p">,</span> <span class="s1">&#39;url&#39;</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># result =&gt; {</span>
<span class="c1">#   &#39;limits&#39;: {&#39;cpu_k_hours&#39;: 1000, &#39;gb_k_hours&#39;: 3000, &#39;gpu_k_hours&#39;: 1000},</span>
<span class="c1">#   &#39;name&#39;: &#39;Sample resource&#39;,</span>
<span class="c1">#   &#39;offering&#39;: &#39;https://puhuri-core-beta.neic.no/api/marketplace-provider-offerings/cf4eb9c29fc74af4ade667fcb53633d5/&#39;,</span>
<span class="c1">#   &#39;plan&#39;: &#39;https://puhuri-core-beta.neic.no/api/marketplace-public-plans/1537de6e94f9427cafb74cb63fa21c72/&#39;,</span>
<span class="c1">#   &#39;project&#39;: &#39;https://puhuri-core-beta.neic.no/api/projects/8a158ebf1abf4c74a431b9c65a0d7829/&#39;,</span>
<span class="c1">#   &#39;state&#39;: &#39;Creating&#39;,</span>
<span class="c1">#   &#39;url&#39;: &#39;https://puhuri-core-beta.neic.no/api/marketplace-resources/a1916bd53fd04b1ab1a4e700c926607b/&#39;</span>
<span class="c1"># }</span>
</code></pre></div></td></tr></table></div>
<h2 id="approvingrejecting-allocation-order-by-service-provider">Approving/rejecting allocation order by service provider</h2>
<p>The service provider can either approve or reject order using
<code>marketplace_order_approve_by_provider</code> and <code>marketplace_order_reject_by_provider</code> correspondingly.
Both of these methods expect as its only argument UUID of an order for the allocation.</p>
<p>For example, a consumer requested an allocation using <code>Order</code> with <code>CREATE</code> type. After that, an empty allocation with <code>CREATING</code> state has appeared.
A service provider can change the state to <code>ok</code> (created successfully) using <code>marketplace_order_approve_by_provider</code> or
<code>rejected</code> (creation rejected) using <code>marketplace_order_reject_by_provider</code>.
In order to get a proper order, SP owner can use <code>list_orders</code> method. This action is for order listing and supports filtering by state and allocation.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">orders</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_orders</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;executing&#39;</span><span class="p">,</span>
        <span class="s1">&#39;resource_uuid&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;allocation-uuid&gt;&#39;</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="n">order</span> <span class="o">=</span> <span class="n">orders</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">client</span><span class="o">.</span><span class="n">marketplace_order_approve_by_provider</span><span class="p">(</span><span class="n">order</span><span class="p">[</span><span class="s1">&#39;uuid&#39;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
<h2 id="cancellation-of-orders-for-allocations">Cancellation of orders for allocations</h2>
<p>A consumer can also cancel created order and subsequently interrupt the requested operation over allocation.
For example, this option is suitable if the customer wants to cancel allocation deletion.
For this, <code>marketplace_order_cancel</code> method should be used.
It changes the state of the order to <code>canceled</code>.
<strong>NB</strong>: this transition is possible only if the order's state is equal to <code>pending-consumer</code> or <code>pending-provider</code> and offering type is basic or support.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">orders</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_orders</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;executing&#39;</span><span class="p">,</span>
        <span class="s1">&#39;resource_uuid&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;allocation-uuid&gt;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Terminate&#39;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="n">order</span> <span class="o">=</span> <span class="n">orders</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">marketplace_order_cancel</span><span class="p">(</span><span class="n">order</span><span class="p">[</span><span class="s1">&#39;uuid&#39;</span><span class="p">])</span>

<span class="c1"># result =&gt; {</span>
<span class="c1">#   &#39;details&#39;: &#39;order termination has been scheduled.&#39;</span>
<span class="c1">#}</span>
</code></pre></div></td></tr></table></div>
<h2 id="updating-resource-allocation-with-local-reference-setting-backend_id-field">Updating resource allocation with local reference (setting <code>backend_id</code> field)</h2>
<p>Each allocation can have a link to a service provider's internal reference using <code>backend_id</code> field. Only users with service provider owner and manager roles can set this value using <code>marketplace_resource_set_backend_id</code> method of the client. It requires the following arguments:</p>
<ul>
<li><strong><code>resource_uuid</code></strong> - UUID of a resource allocation;</li>
<li><strong><code>backend_id</code></strong> - id of an external entity.</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">marketplace_resource_set_backend_id</span><span class="p">(</span>
    <span class="n">resource_uuid</span><span class="o">=</span><span class="s1">&#39;&lt;resource-uuid&gt;&#39;</span><span class="p">,</span>
    <span class="n">backend_id</span><span class="o">=</span><span class="s1">&#39;&lt;some-backend-id&gt;&#39;</span>
<span class="p">)</span>

<span class="c1"># result =&gt; {</span>
<span class="c1">#   &#39;status&#39;: &#39;Resource backend_id has been changed.&#39;</span>
<span class="c1"># }</span>
</code></pre></div></td></tr></table></div>
<p>In case if SDK usage is not possible, HTTP request can be sent:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="err">POST &lt;API-URL&gt;/marketplace-resources/&lt;resource-uuid&gt;/</span>

<span class="err">{</span>
<span class="err">    &quot;backend_id&quot;: &quot;&lt;some-backend-id&gt;&quot;</span>
<span class="err">}</span>

<span class="err">&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span>

<span class="err">{</span>
<span class="err">    &quot;status&quot;: &quot;Resource backend_id has been changed.&quot;</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="providing-additional-access-detail-for-resource-allocation">Providing additional access detail for resource allocation</h2>
<p>For additional details related to allocation access, <code>report</code> field is used.
In order to provide this information, owners and managers can use <code>marketplace_resource_submit_report</code> method. It requires the following arguments:</p>
<ul>
<li><strong><code>resource_uuid</code></strong> - UUID of a resource allocation;</li>
<li><strong><code>report</code></strong> - list of <code>ResourceReportRecord</code> instances.</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">waldur_client</span><span class="w"> </span><span class="kn">import</span> <span class="n">WaldurClient</span><span class="p">,</span> <span class="n">ResourceReportRecord</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">marketplace_resource_submit_report</span><span class="p">(</span>
    <span class="n">resource_uuid</span><span class="o">=</span><span class="s1">&#39;&lt;resource-uuid&gt;&#39;</span><span class="p">,</span>
    <span class="n">report</span><span class="o">=</span><span class="p">[</span>
        <span class="n">ResourceReportRecord</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="s1">&#39;Header1&#39;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="s1">&#39;Body1&#39;</span><span class="p">),</span>
        <span class="n">ResourceReportRecord</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="s1">&#39;Header2&#39;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="s1">&#39;Body2&#39;</span><span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="c1"># result =&gt; {</span>
<span class="c1">#   &#39;status&#39;: &#39;Report is submitted&#39;</span>
<span class="c1"># }</span>
</code></pre></div></td></tr></table></div>
<h2 id="getting-a-list-of-members-in-a-project-with-active-resource-allocations">Getting a list of members in a project with active resource allocations</h2>
<p>Service provider owners and managers can list project members using a resource allocation with <code>marketplace_resource_get_team</code> method.
It requires the following arguments:</p>
<ul>
<li><strong><code>resource_uuid</code></strong> - UUID of a resource allocation.</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">marketplace_resource_get_team</span><span class="p">(</span>
    <span class="n">resource_uuid</span><span class="o">=</span><span class="s1">&#39;&lt;resource-uuid&gt;&#39;</span>
<span class="p">)</span>

<span class="c1"># result =&gt; {</span>
<span class="c1"># [</span>
<span class="c1">#  {&#39;email&#39;: &#39;CSC_api_user@example.com&#39;,</span>
<span class="c1">#   &#39;expiration_time&#39;: None,</span>
<span class="c1">#   &#39;full_name&#39;: &#39;Integration user (CSC)&#39;,</span>
<span class="c1">#   &#39;permission&#39;: &#39;https://puhuri-core-beta.neic.no/api/project-permissions/10/&#39;,</span>
<span class="c1">#   &#39;role&#39;: &#39;admin&#39;,</span>
<span class="c1">#   &#39;url&#39;: &#39;https://puhuri-core-beta.neic.no/api/users/bb235c67dcb44470a45d4e0f94e0ed00/&#39;,</span>
<span class="c1">#   &#39;username&#39;: &#39;CSC_api_user&#39;,</span>
<span class="c1">#   &#39;uuid&#39;: &#39;bb235c67dcb44470a45d4e0f94e0ed00&#39;},</span>
<span class="c1">#  {&#39;email&#39;: &#39;ETAIS_api_user@example.com&#39;,</span>
<span class="c1">#   &#39;expiration_time&#39;: None,</span>
<span class="c1">#   &#39;full_name&#39;: &#39;Integration user (ETAIS)&#39;,</span>
<span class="c1">#   &#39;permission&#39;: &#39;https://puhuri-core-beta.neic.no/api/project-permissions/3/&#39;,</span>
<span class="c1">#   &#39;role&#39;: &#39;member&#39;,</span>
<span class="c1">#   &#39;url&#39;: &#39;https://puhuri-core-beta.neic.no/api/users/0cc72de4ebb840d98fef133e4433ec9a/&#39;,</span>
<span class="c1">#   &#39;username&#39;: &#39;ETAIS_api_user&#39;,</span>
<span class="c1">#   &#39;uuid&#39;: &#39;0cc72de4ebb840d98fef133e4433ec9a&#39;}]</span>
<span class="c1"># }</span>
</code></pre></div></td></tr></table></div>
<h2 id="reporting-usage-for-a-resource-allocation">Reporting usage for a resource allocation</h2>
<p>A usage of a resource allocation can be submitted by a corresponding service provider.
For this, the following methods are used:</p>
<ul>
<li>
<p><code>get_marketplace_offering</code> - getting offering with components info. Arguments:</p>
<ul>
<li><strong><code>offering_uuid</code></strong> - UUID of an offering</li>
</ul>
</li>
<li>
<p><code>marketplace_resource_get_plan_periods</code> - getting current plan periods for resource allocation. Arguments:</p>
<ul>
<li><strong><code>resource_uuid</code></strong> - UUID of a resource</li>
</ul>
</li>
<li>
<p><code>create_component_usages</code> - creating or updating components usage for the current plan. Arguments:</p>
<ul>
<li><strong><code>usages</code></strong> - list of <code>ComponentUsage</code> instances</li>
<li><strong><code>resource</code></strong> - UUID of a resource</li>
</ul>
</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">waldur_client</span><span class="w"> </span><span class="kn">import</span> <span class="n">ComponentUsage</span>

<span class="n">offering</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_marketplace_offering</span><span class="p">(</span><span class="n">offering_uuid</span><span class="o">=</span><span class="s1">&#39;&lt;offering-uuid&gt;&#39;</span><span class="p">)</span>
<span class="n">component_types</span> <span class="o">=</span> <span class="p">[</span><span class="n">component</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">offering</span><span class="p">[</span><span class="s1">&#39;components&#39;</span><span class="p">]]</span>
<span class="n">component_usages</span> <span class="o">=</span> <span class="p">[</span><span class="n">ComponentUsage</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">comp_type</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Usage&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">comp_type</span> <span class="ow">in</span> <span class="n">component_types</span><span class="p">]</span>

<span class="n">client</span><span class="o">.</span><span class="n">create_component_usages</span><span class="p">(</span>
    <span class="n">usages</span><span class="o">=</span><span class="n">component_usages</span><span class="p">,</span>
    <span class="n">resource</span><span class="o">=</span><span class="s1">&#39;&lt;resource-uuid&gt;&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">marketplace_resource_get_plan_periods</span><span class="p">(</span><span class="s1">&#39;&lt;resource-uuid&gt;&#39;</span><span class="p">)</span>

<span class="c1"># result =&gt; {</span>
<span class="c1"># [{&#39;components&#39;: [{&#39;created&#39;: &#39;2021-08-11T15:36:45.562440Z&#39;,</span>
<span class="c1">#                   &#39;date&#39;: &#39;2021-08-11T15:37:30.556830Z&#39;,</span>
<span class="c1">#                   &#39;description&#39;: &#39;Usage&#39;,</span>
<span class="c1">#                   &#39;measured_unit&#39;: &#39;units&#39;,</span>
<span class="c1">#                   &#39;name&#39;: &#39;CPU&#39;,</span>
<span class="c1">#                   &#39;type&#39;: &#39;cpu&#39;,</span>
<span class="c1">#                   &#39;usage&#39;: 10,</span>
<span class="c1">#                   &#39;uuid&#39;: &#39;080066bebf9547d5ad3279f7c353b023&#39;},</span>
<span class="c1">#                  {&#39;created&#39;: &#39;2021-08-11T15:36:45.842385Z&#39;,</span>
<span class="c1">#                   &#39;date&#39;: &#39;2021-08-11T15:37:30.556830Z&#39;,</span>
<span class="c1">#                   &#39;description&#39;: &#39;Usage&#39;,</span>
<span class="c1">#                   &#39;measured_unit&#39;: &#39;units&#39;,</span>
<span class="c1">#                   &#39;name&#39;: &#39;GPU&#39;,</span>
<span class="c1">#                   &#39;type&#39;: &#39;gpu&#39;,</span>
<span class="c1">#                   &#39;usage&#39;: 10,</span>
<span class="c1">#                   &#39;uuid&#39;: &#39;e8d745049bff4410b60f517e56daf421&#39;}],</span>
<span class="c1">#   &#39;end&#39;: None,</span>
<span class="c1">#   &#39;plan_name&#39;: &#39;sample-plan&#39;,</span>
<span class="c1">#   &#39;plan_uuid&#39;: &#39;9f7b1d113f464214bb195db38c217cf9&#39;,</span>
<span class="c1">#   &#39;start&#39;: &#39;2021-08-11T15:20:25.762775Z&#39;,</span>
<span class="c1">#   &#39;uuid&#39;: &#39;fb36ce56e53b43e59b3d963354d0467c&#39;}]</span>
<span class="c1"># }</span>
</code></pre></div></td></tr></table></div>
<h2 id="granting-user-access-to-resource">Granting user access to resource</h2>
<p>An access to a resource can be granted by service provider for a particular user with specification of username.
A result is represented by triplet [user, resource, username].
For this purpose, <code>create_remote_offering_user</code> should be invoked. This method requires the following arguments:</p>
<ul>
<li><strong><code>offering</code></strong> - UUID or URL of a target offering;</li>
<li><strong><code>user</code></strong> - UUID or URL of a target user;</li>
<li><code>username</code> - username for the user.</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">create_remote_offering_user</span><span class="p">(</span>
    <span class="n">offering</span><span class="o">=</span><span class="s1">&#39;&lt;offering-uuid-or-url&gt;&#39;</span><span class="p">,</span>
    <span class="n">user</span><span class="o">=</span><span class="s1">&#39;&lt;user-uuid-or-url&gt;&#39;</span><span class="p">,</span>
    <span class="n">username</span><span class="o">=</span><span class="s1">&#39;&lt;username&gt;&#39;</span>
<span class="p">)</span>

<span class="c1"># result =&gt; {</span>
<span class="c1">#  &#39;created&#39;: &#39;2021-08-12T15:22:18.993586Z&#39;,</span>
<span class="c1">#  &#39;offering&#39;: &#39;http://localhost:8000/api/marketplace-provider-offerings/d47ca5bce71144579df29da3c290027e/&#39;,</span>
<span class="c1">#  &#39;offering_name&#39;: &#39;Remote offering (really)&#39;,</span>
<span class="c1">#  &#39;offering_uuid&#39;: &#39;d47ca5bce71144579df29da3c290027e&#39;,</span>
<span class="c1">#  &#39;user&#39;: &#39;http://localhost:8000/api/users/db157a5cf7f247eba161cd90eba9ac63/&#39;,</span>
<span class="c1">#  &#39;user_uuid&#39;: &#39;db157a5cf7f247eba161cd90eba9ac63&#39;,</span>
<span class="c1">#  &#39;username&#39;: &#39;abc&#39;</span>
<span class="c1"># }</span>
</code></pre></div></td></tr></table></div>
<p>In case if SDK usage is not possible, HTTP request can be sent:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="err">POST &lt;API-URL&gt;/marketplace-offering-users/</span>

<span class="err">{</span>
<span class="err">    &quot;offering&quot;: &quot;&lt;offering-uuid-or-url&gt;&quot;,</span>
<span class="err">    &quot;user&quot;: &quot;&lt;user-uuid-or-url&gt;&quot;,</span>
<span class="err">    &quot;username&quot;: &quot;&lt;username&gt;&quot;</span>
<span class="err">}</span>

<span class="err">&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span>

<span class="err">{</span>
<span class="err">    &quot;created&quot;: &quot;2021-08-12T15:22:18.993586Z&quot;,</span>
<span class="err">    &quot;offering&quot;: &quot;http://localhost:8000/api/marketplace-provider-offerings/d47ca5bce71144579df29da3c290027e/&quot;,</span>
<span class="err">    &quot;offering_name&quot;: &quot;Remote offering (really)&quot;,</span>
<span class="err">    &quot;offering_uuid&quot;: &quot;d47ca5bce71144579df29da3c290027e&quot;,</span>
<span class="err">    &quot;user&quot;: &quot;http://localhost:8000/api/users/db157a5cf7f247eba161cd90eba9ac63/&quot;,</span>
<span class="err">    &quot;user_uuid&quot;: &quot;db157a5cf7f247eba161cd90eba9ac63&quot;,</span>
<span class="err">    &quot;username&quot;: &quot;abc&quot;</span>
<span class="err">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="granting-user-access-to-corresponding-resources-in-batch-manner">Granting user access to corresponding resources in batch manner</h2>
<p>A service provider can grant access mentioned in the previous section to all resources used in projects including a target user.
For such access creation or update, <code>set_offerings_username</code> is used.
The method requires the following arguments:</p>
<ul>
<li><strong>service_provider_uuid</strong> - UUID of a target service provider;</li>
<li><strong>user_uuid</strong> - UUID of a target user;</li>
<li><strong>username</strong> - the new username.</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">set_offerings_username</span><span class="p">(</span>
    <span class="n">service_provider_uuid</span><span class="o">=</span><span class="s1">&#39;&lt;service-provider-uuid&gt;&#39;</span><span class="p">,</span>
    <span class="n">user_uuid</span><span class="o">=</span><span class="s1">&#39;&lt;user-uuid&gt;&#39;</span><span class="p">,</span>
    <span class="n">username</span><span class="o">=</span><span class="s1">&#39;&lt;username&gt;&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># result =&gt;  {</span>
<span class="c1">#  &#39;detail&#39;: &#39;Offering users have been set.&#39;</span>
<span class="c1"># }</span>
</code></pre></div></td></tr></table></div>
<h2 id="getting-service-provider-for-an-organization">Getting service provider for an organization</h2>
<p>A user can get service provider details
using <code>list_service_providers</code> with corresponding filter.
This method is guaranteed to return a list with at most one service provider record.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">service_providers</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_service_providers</span><span class="p">({</span><span class="s1">&#39;customer_uuid&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;organization_uuid&gt;&#39;</span><span class="p">})</span>
<span class="n">lumi_service_provider</span> <span class="o">=</span> <span class="n">service_providers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># lumi_service_provider =&gt; {</span>
<span class="c1">#     &#39;created&#39;: &#39;2021-09-24T13:42:05.448269Z&#39;,</span>
<span class="c1">#     &#39;customer&#39;: &#39;https://puhuri-core-beta.neic.no/api/customers/ad3fec96141a41e2958a9836a5bc1dae/&#39;,</span>
<span class="c1">#     &#39;customer_abbreviation&#39;: &#39;LUMI&#39;,</span>
<span class="c1">#     &#39;customer_country&#39;: &#39;FI&#39;,</span>
<span class="c1">#     &#39;customer_image&#39;: None,</span>
<span class="c1">#     &#39;customer_name&#39;: &#39;Large Unified Modern Infrastructure&#39;,</span>
<span class="c1">#     &#39;customer_native_name&#39;: &#39;&#39;,</span>
<span class="c1">#     &#39;customer_uuid&#39;: &#39;ad3fec96141a41e2958a9836a5bc1dae&#39;,</span>
<span class="c1">#     &#39;description&#39;: &#39;&#39;,</span>
<span class="c1">#     &#39;division&#39;: None,</span>
<span class="c1">#     &#39;enable_notifications&#39;: False,</span>
<span class="c1">#     &#39;image&#39;: None,</span>
<span class="c1">#     &#39;url&#39;: &#39;https://puhuri-core-beta.neic.no/api/marketplace-service-providers/08904a1c2e704f208e5146bef93e3220/&#39;,</span>
<span class="c1">#     &#39;uuid&#39;: &#39;08904a1c2e704f208e5146bef93e3220&#39;</span>
<span class="c1"># }</span>
</code></pre></div></td></tr></table></div>
<h2 id="listing-users-of-service-providers-resources">Listing users of service provider's resources</h2>
<p>A service provider owner can list users currently using its resources.
For this, <code>list_service_provider_users</code> should be used. It accepts <strong>service_provider_uuid</strong>,
which can be fetched using <a href="#getting-service-provider-for-an-organization">list_service_providers</a>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">service_providers</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_service_providers</span><span class="p">({</span><span class="s1">&#39;customer_uuid&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;customer_uuid&gt;&#39;</span><span class="p">})</span>
<span class="n">service_provider</span> <span class="o">=</span> <span class="n">service_providers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">service_provider_uuid</span> <span class="o">=</span> <span class="n">service_provider</span><span class="p">[</span><span class="s1">&#39;uuid&#39;</span><span class="p">]</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_service_provider_users</span><span class="p">(</span><span class="n">service_provider_uuid</span><span class="p">)</span>

<span class="c1"># result =&gt; [</span>
<span class="c1">#   ...</span>
<span class="c1">#   {</span>
<span class="c1">#       ...</span>
<span class="c1">#       &#39;first_name&#39;: &#39;John&#39;,</span>
<span class="c1">#       &#39;full_name&#39;: &#39;John Doe&#39;,</span>
<span class="c1">#       &#39;is_active&#39;: True,</span>
<span class="c1">#       &#39;is_staff&#39;: False,</span>
<span class="c1">#       &#39;is_support&#39;: False,</span>
<span class="c1">#       &#39;job_title&#39;: &#39;...&#39;,</span>
<span class="c1">#       &#39;last_name&#39;: &#39;Doe&#39;,</span>
<span class="c1">#       ...</span>
<span class="c1">#   }</span>
<span class="c1">#   ...</span>
<span class="c1"># ]</span>
</code></pre></div></td></tr></table></div>
<h2 id="listing-ssh-key-for-users-of-service-providers-resources">Listing ssh key for users of service provider's resources</h2>
<p>A service provider owner can list ssh keys of users currently using its resources.
For this, <code>list_service_provider_ssh_keys</code> should be used. It accepts <strong>service_provider_uuid</strong>,
which can be fetched using <a href="#getting-service-provider-for-an-organization">list_service_providers</a>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">service_providers</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_service_providers</span><span class="p">({</span><span class="s1">&#39;customer_uuid&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;customer_uuid&gt;&#39;</span><span class="p">})</span>
<span class="n">service_provider</span> <span class="o">=</span> <span class="n">service_providers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">service_provider_uuid</span> <span class="o">=</span> <span class="n">service_provider</span><span class="p">[</span><span class="s1">&#39;uuid&#39;</span><span class="p">]</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_service_provider_ssh_keys</span><span class="p">(</span><span class="n">service_provider_uuid</span><span class="p">)</span>

<span class="c1"># result =&gt; [</span>
<span class="c1">#   ...</span>
<span class="c1">#   {</span>
<span class="c1">#        &#39;fingerprint&#39;: &#39;...&#39;,</span>
<span class="c1">#        &#39;is_shared&#39;: False,</span>
<span class="c1">#        &#39;name&#39;: &#39;key&#39;,</span>
<span class="c1">#        &#39;public_key&#39;: &#39;ssh-rsa ...&#39;,</span>
<span class="c1">#        &#39;type&#39;: &#39;ssh-rsa&#39;,</span>
<span class="c1">#        &#39;url&#39;: &#39;&lt;key_url&gt;&#39;,</span>
<span class="c1">#        &#39;user_uuid&#39;: &#39;&lt;user_uuid&gt;&#39;,</span>
<span class="c1">#        &#39;uuid&#39;: &#39;&lt;key_uuid&gt;&#39;</span>
<span class="c1">#   }</span>
<span class="c1">#   ...</span>
<span class="c1"># ]</span>
</code></pre></div></td></tr></table></div>
<h2 id="listing-projects-with-service-providers-resources">Listing projects with service provider's resources</h2>
<p>A service provider owner can list all projects, which have its resources.
For this, <code>list_service_provider_projects</code> should be used. It accepts <strong>service_provider_uuid</strong>,
which can be fetched using <a href="#getting-service-provider-for-an-organization">list_service_providers</a>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">service_providers</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_service_providers</span><span class="p">({</span><span class="s1">&#39;customer_uuid&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;customer_uuid&gt;&#39;</span><span class="p">})</span>
<span class="n">service_provider</span> <span class="o">=</span> <span class="n">service_providers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">service_provider_uuid</span> <span class="o">=</span> <span class="n">service_provider</span><span class="p">[</span><span class="s1">&#39;uuid&#39;</span><span class="p">]</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_service_provider_projects</span><span class="p">(</span><span class="n">service_provider_uuid</span><span class="p">)</span>

<span class="c1"># result =&gt; [</span>
<span class="c1">#   ...</span>
<span class="c1">#   {</span>
<span class="c1">#       &#39;backend_id&#39;: &#39;&#39;,</span>
<span class="c1">#       &#39;billing_price_estimate&#39;: {...},</span>
<span class="c1">#       &#39;created&#39;: &#39;...&#39;,</span>
<span class="c1">#       &#39;customer&#39;: &#39;&lt;customer_url&gt;&#39;,</span>
<span class="c1">#       &#39;customer_abbreviation&#39;: &#39;&lt;customer_abbreviation&gt;&#39;,</span>
<span class="c1">#       &#39;customer_name&#39;: &#39;&lt;customer_name&gt;&#39;,</span>
<span class="c1">#       &#39;customer_native_name&#39;: &#39;&lt;customer_native_name&gt;&#39;,</span>
<span class="c1">#       &#39;customer_uuid&#39;: &#39;&lt;customer_uuid&gt;&#39;,</span>
<span class="c1">#       &#39;description&#39;: &#39;&lt;customer_description&gt;&#39;,</span>
<span class="c1">#       &#39;end_date&#39;: &#39;...&#39;,</span>
<span class="c1">#       &#39;name&#39;: &#39;&lt;project_name&gt;&#39;,</span>
<span class="c1">#       &#39;oecd_fos_2007_code&#39;: &#39;&lt;oecd_fos_2007_code&gt;&#39;,</span>
<span class="c1">#       &#39;type&#39;: &#39;&lt;project_type&gt;&#39;,</span>
<span class="c1">#       &#39;url&#39;: &#39;&lt;project_url&gt;&#39;,</span>
<span class="c1">#       &#39;uuid&#39;: &#39;&lt;project_uuid&gt;&#39;</span>
<span class="c1">#   }</span>
<span class="c1">#   ...</span>
<span class="c1"># ]</span>
</code></pre></div></td></tr></table></div>
<h2 id="listing-project-permissions-in-projects-using-service-providers-resources">Listing project permissions in projects using service provider's resources</h2>
<p>A service provider owner can also list all active projects permissions in projects, which have its resources.
For this, <code>list_service_provider_project_permissions</code> should be used. It accepts <strong>service_provider_uuid</strong>,
which can be fetched using <a href="#getting-service-provider-for-an-organization">list_service_providers</a>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">service_providers</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_service_providers</span><span class="p">({</span><span class="s1">&#39;customer_uuid&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;customer_uuid&gt;&#39;</span><span class="p">})</span>
<span class="n">service_provider</span> <span class="o">=</span> <span class="n">service_providers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">service_provider_uuid</span> <span class="o">=</span> <span class="n">service_provider</span><span class="p">[</span><span class="s1">&#39;uuid&#39;</span><span class="p">]</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_service_provider_project_permissions</span><span class="p">(</span><span class="n">service_provider_uuid</span><span class="p">)</span>

<span class="c1"># result =&gt; [</span>
<span class="c1">#   ...</span>
<span class="c1">#   {</span>
<span class="c1">#       &#39;created&#39;: &#39;...&#39;,</span>
<span class="c1">#       &#39;created_by&#39;: &#39;...&#39;,</span>
<span class="c1">#       &#39;customer_name&#39;: &#39;&lt;customer_name&gt;&#39;,</span>
<span class="c1">#       &#39;expiration_time&#39;: &#39;...&#39;,</span>
<span class="c1">#       &#39;pk&#39;: ...,</span>
<span class="c1">#       &#39;project&#39;: &#39;&lt;project_url&gt;&#39;,</span>
<span class="c1">#       &#39;project_name&#39;: &#39;&lt;project_name&gt;&#39;,</span>
<span class="c1">#       &#39;project_uuid&#39;: &#39;&lt;project_uuid&gt;&#39;,</span>
<span class="c1">#       &#39;role&#39;: &#39;...&#39;,</span>
<span class="c1">#       &#39;url&#39;: &#39;&lt;permission_url&gt;&#39;,</span>
<span class="c1">#       &#39;user&#39;: &#39;&lt;user_url&gt;&#39;,</span>
<span class="c1">#       &#39;user_email&#39;: &#39;&lt;user_email&gt;&#39;,</span>
<span class="c1">#       &#39;user_full_name&#39;: &#39;John Doe&#39;,</span>
<span class="c1">#       &#39;user_native_name&#39;: &#39;John Doe&#39;,</span>
<span class="c1">#       &#39;user_username&#39;: &#39;john-doe&#39;,</span>
<span class="c1">#       &#39;user_uuid&#39;: &#39;&lt;user_uuid&gt;&#39;</span>
<span class="c1">#   }</span>
<span class="c1">#   ...</span>
<span class="c1"># ]</span>
</code></pre></div></td></tr></table></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
        <script src="../../analytics.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>